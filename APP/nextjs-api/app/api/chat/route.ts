import { NextResponse } from "next/server";

// –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞
const knowledgeBase: Record<string, string> = {
  // React & Next.js
  react: `React - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è UI. 
üîπ **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
‚Ä¢ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ –∫–ª–∞—Å—Å–æ–≤—ã–µ)
‚Ä¢ –•—É–∫–∏ (useState, useEffect, useContext)
‚Ä¢ –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π DOM
‚Ä¢ –ü—Ä–æ–ø—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚Ä¢ JSX —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

üí° –ü—Ä–∏–º–µ—Ä:
\`\`\`jsx
function Counter() {
  const [count, setCount] = useState(0);
  return <button onClick={() => setCount(c => c + 1)}>{count}</button>;
}
\`\`\``,

  "next.js": `Next.js - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ React –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.
üöÄ **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
‚Ä¢ –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (SSR)
‚Ä¢ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (SSG)
‚Ä¢ –§–∞–π–ª–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚Ä¢ API Routes
‚Ä¢ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ App Router:
app/
  page.tsx      ‚Üí /
  about/
    page.tsx    ‚Üí /about
  api/
    chat/
      route.ts  ‚Üí /api/chat`,

  next: `Next.js - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ React –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.
üöÄ **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
‚Ä¢ –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (SSR)
‚Ä¢ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (SSG)
‚Ä¢ –§–∞–π–ª–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚Ä¢ API Routes
‚Ä¢ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è`,

  // JavaScript & TypeScript
  javascript: `JavaScript - —è–∑—ã–∫ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
üåü **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
‚Ä¢ Async/await –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏
‚Ä¢ –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚Ä¢ –î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è
‚Ä¢ –ú–æ–¥—É–ª–∏ (import/export)
‚Ä¢ Promises

üí° –ü—Ä–∏–º–µ—Ä –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏:
\`\`\`javascript
async function fetchData() {
  try {
    const response = await fetch('/api/data');
    return await response.json();
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞:', error);
  }
}
\`\`\``,

  typescript: `TypeScript - JavaScript —Å —Ç–∏–ø–∞–º–∏.
üõ°Ô∏è **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
‚Ä¢ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚Ä¢ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ IDE
‚Ä¢ –°–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥
‚Ä¢ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ

üí° –ü—Ä–∏–º–µ—Ä —Ç–∏–ø–æ–≤:
\`\`\`typescript
interface User {
  id: number;
  name: string;
  email: string;
}

function createUser(user: User): User {
  return { ...user, id: Date.now() };
}
\`\`\``,

  // Backend
  "node.js": `Node.js - JavaScript –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
‚ö° **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
‚Ä¢ –°–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚Ä¢ –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O
‚Ä¢ –û–≥—Ä–æ–º–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ (npm)
‚Ä¢ –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

üì¶ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏:
‚Ä¢ Express.js
‚Ä¢ Nest.js
‚Ä¢ Fastify`,

  express: `Express.js - –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫.
üéØ **–û—Å–Ω–æ–≤—ã:**
‚Ä¢ Middleware —Ü–µ–ø–æ—á–∫–∏
‚Ä¢ –†–æ—É—Ç–∏–Ω–≥
‚Ä¢ –®–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è
‚Ä¢ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ –≥–∏–±–∫–æ—Å—Ç—å

üí° –ü—Ä–∏–º–µ—Ä —Å–µ—Ä–≤–µ—Ä–∞:
\`\`\`javascript
const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.json({ message: 'Hello World!' });
});

app.listen(3000);
\`\`\``,

  // Databases
  "–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö": `–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏.
üóÑÔ∏è **–¢–∏–ø—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö:**
‚Ä¢ SQL (—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ): PostgreSQL, MySQL
‚Ä¢ NoSQL (–¥–æ–∫—É–º–µ–Ω—Ç–Ω—ã–µ): MongoDB, Redis
‚Ä¢ Graph: Neo4j (–¥–ª—è —Å–≤—è–∑–µ–π)
‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã: InfluxDB

üîç **–í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:**
‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
‚Ä¢ –°–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤`,

  sql: `SQL - —è–∑—ã–∫ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö.
üìä **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
‚Ä¢ SELECT - –≤—ã–±–æ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ INSERT - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
‚Ä¢ UPDATE - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ DELETE - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
‚Ä¢ JOIN - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

üí° –ü—Ä–∏–º–µ—Ä:
\`\`\`sql
SELECT users.name, orders.total 
FROM users 
JOIN orders ON users.id = orders.user_id 
WHERE orders.total > 100;
\`\`\``,

  mongodb: `MongoDB - –¥–æ–∫—É–º–µ–Ω—Ç–Ω–∞—è NoSQL –±–∞–∑–∞.
üìÑ **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
‚Ä¢ –ì–∏–±–∫–∞—è —Å—Ö–µ–º–∞ (JSON-–¥–æ–∫—É–º–µ–Ω—Ç—ã)
‚Ä¢ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
‚Ä¢ –ê–≥—Ä–µ–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ pipeline
‚Ä¢ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞`,

  // DevOps & Tools
  docker: `Docker - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
üê≥ **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
‚Ä¢ –û–±—Ä–∞–∑—ã (Images)
‚Ä¢ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (Containers)
‚Ä¢ Dockerfile
‚Ä¢ Docker Compose
‚Ä¢ Volumes (—Ç–æ–º–∞)

üí° –ü—Ä–∏–º–µ—Ä Dockerfile:
\`\`\`dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
\`\`\``,

  git: `Git - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π.
üå≥ **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
‚Ä¢ git clone - –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚Ä¢ git commit - —Ñ–∏–∫—Å–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚Ä¢ git push - –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚Ä¢ git pull - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚Ä¢ git branch - —Ä–∞–±–æ—Ç–∞ —Å –≤–µ—Ç–∫–∞–º–∏

üöÄ **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**
‚Ä¢ Git Flow
‚Ä¢ Feature branches
‚Ä¢ Code review —á–µ—Ä–µ–∑ PR/MR`,

  api: `API - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–≥—Ä–∞–º–º.
üåê **REST API –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
‚Ä¢ HTTP –º–µ—Ç–æ–¥—ã: GET, POST, PUT, DELETE
‚Ä¢ –°—Ç–∞—Ç—É—Å –∫–æ–¥—ã: 200, 201, 400, 404, 500
‚Ä¢ JSON —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –ë–µ–∑—Å–æ—Å—Ç–æ—è–Ω–∏–µ (stateless)

üí° –ü—Ä–∏–º–µ—Ä REST endpoint:
\`\`\`typescript
// GET /api/users - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// POST /api/users - —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
// PUT /api/users/:id - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
// DELETE /api/users/:id - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
\`\`\``,

  // Frontend
  html: `HTML - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü.
üèóÔ∏è **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏:**
‚Ä¢ <header>, <main>, <footer>
‚Ä¢ <section>, <article>, <aside>
‚Ä¢ <nav> - –Ω–∞–≤–∏–≥–∞—Ü–∏—è
‚Ä¢ <form> - —Ñ–æ—Ä–º—ã –≤–≤–æ–¥–∞

üéØ **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (a11y):**
‚Ä¢ –ê—Ç—Ä–∏–±—É—Ç—ã aria-label, alt
‚Ä¢ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
‚Ä¢ Keyboard navigation`,

  css: `CSS - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü.
üé® **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
‚Ä¢ Grid –∏ Flexbox –¥–ª—è layout
‚Ä¢ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (custom properties)
‚Ä¢ –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ transitions
‚Ä¢ Media queries –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏

üí° –ü—Ä–∏–º–µ—Ä Grid:
\`\`\`css
.container {
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 20px;
}
\`\`\``,

  tailwind: `Tailwind CSS - —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫.
‚ö° **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚Ä¢ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∏–∑–∞–π–Ω–∞
‚Ä¢ –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚Ä¢ Tree shaking –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å—Ç–∏–ª–µ–π

üí° –ü—Ä–∏–º–µ—Ä:
\`\`\`html
<button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
  Click me
</button>
\`\`\``,
};

export async function POST(request: Request) {
  try {
    const { message } = await request.json();

    if (!message || message.trim().length === 0) {
      return NextResponse.json({
        response:
          "ü§ñ –ü—Ä–∏–≤–µ—Ç! –Ø AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –ø–æ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –°–ø—Ä–æ—Å–∏ –º–µ–Ω—è –æ React, Next.js, JavaScript, –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö!",
        status: "welcome",
      });
    }

    // –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
    const lowerMessage = message.toLowerCase().trim();
    let response = "";
    let matchedTopic = "";

    // –ò—â–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Ç–µ–º
    for (const [topic, answer] of Object.entries(knowledgeBase)) {
      if (lowerMessage.includes(topic)) {
        response = answer;
        matchedTopic = topic;
        break;
      }
    }

    // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç
    if (response) {
      return NextResponse.json({
        response: `${response}\n\n---\n*üí° –≠—Ç–æ –¥–µ–º–æ-—Ä–µ–∂–∏–º AI Tutor. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω Yandex GPT –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã!*`,
        topic: matchedTopic,
        status: "knowledge_base",
      });
    }

    // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ - —É–º–Ω—ã–π fallback
    const fallbackResponses = [
      `üß† –ò–∑—É—á–∞—é –≤–∞—à –≤–æ–ø—Ä–æ—Å: "${message}"\n\nüí° –ü–æ–ø—Ä–æ–±—É–π —Å–ø—Ä–æ—Å–∏—Ç—å –æ:\n‚Ä¢ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏ —Ö—É–∫–∞—Ö\n‚Ä¢ Next.js –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏\n‚Ä¢ JavaScript –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏\n‚Ä¢ –ë–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö SQL/NoSQL\n‚Ä¢ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏`,

      `üéØ "${message}" - –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å!\n\nüìö –Ø —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –°–ø—Ä–æ—Å–∏ –æ:\n‚Ä¢ –§—Ä–æ–Ω—Ç–µ–Ω–¥: React, Next.js, TypeScript\n‚Ä¢ –ë—ç–∫–µ–Ω–¥: Node.js, Express, API\n‚Ä¢ –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: SQL, MongoDB\n‚Ä¢ DevOps: Docker, Git, CI/CD\n‚Ä¢ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Tailwind, Webpack`,

      `üöÄ AI Tutor –≤ –¥–µ–π—Å—Ç–≤–∏–∏!\n\n–í–∞—à –≤–æ–ø—Ä–æ—Å: "${message}"\n\nüîß –Ø –º–æ–≥—É –ø–æ–¥—Ä–æ–±–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å:\n‚Ä¢ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Virtual DOM –≤ React\n‚Ä¢ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ SSR –≤ Next.js\n‚Ä¢ Async/await –≤ JavaScript\n‚Ä¢ –†–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É SQL –∏ NoSQL\n‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫—É Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤`,

      `üí° "${message}"?\n\n–û—Ç–ª–∏—á–Ω–∞—è —Ç–µ–∑–∞ –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è! –í –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ —è —Ñ–æ–∫—É—Å–∏—Ä—É—é—Å—å –Ω–∞ –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö. –°–ø—Ä–æ—Å–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏—è—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.`,
    ];

    const randomResponse =
      fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)];

    return NextResponse.json({
      response: randomResponse,
      status: "demo_fallback",
      suggested_topics: Object.keys(knowledgeBase).slice(0, 8),
    });
  } catch (error) {
    console.error("API Error:", error);

    return NextResponse.json(
      {
        response:
          "üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AI Tutor!\n\n–Ø –≤–∞—à –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –ø–æ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ React, Next.js, JavaScript –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –∏–∑ –Ω–∞—à–µ–≥–æ —Å—Ç–µ–∫–∞.",
        status: "welcome_error",
        available_topics: Object.keys(knowledgeBase),
      },
      { status: 200 }
    );
  }
}

// GET endpoint –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± API
export async function GET() {
  return NextResponse.json({
    name: "AI Tutor API",
    version: "1.0.0",
    status: "demo_mode",
    description: "–£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ",
    features: [
      "üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ 15+ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º",
      "üéØ –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞",
      "üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Yandex GPT",
      "üí° –£–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ —Å–æ–≤–µ—Ç—ã",
      "üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤",
    ],
    technologies: Object.keys(knowledgeBase),
    usage: "POST /api/chat —Å { message: '–≤–∞—à –≤–æ–ø—Ä–æ—Å' }",
  });
}
